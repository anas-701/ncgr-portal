<div class="training-program-details" *ngIf="program">
  <!-- Banner Section -->
  <div class="inner_banner banner-container">
    <img
      [src]="program.coverPicturePath"
      alt="Training Program Banner"
      class="banner-image"
    />
</div>

  <!-- Content Wrapper -->

  <div class="container program-details">
    <div class="content-wrapper">
      <!-- Breadcrumb Section -->
      <div class="sm_inner_header">
        <div class="breadcrumb_inner">
          <ul class="modern-breadcrumb">
            <li>
              <a routerLink="/" class="breadcrumb-link">
                <span class="breadcrumb-text active">الرئيسية</span>
              </a>
              <span class="breadcrumb-arrow">›</span>
            </li>
            <li >
              <a>{{ program.titleAr }}</a>
            </li>
        </ul>
        </div>
      </div>
      <hr class="m-0">
      <div class="row mt-4">
        <!-- Sidebar (Image + Info) -->
        <div
          class="d-flex justify-content-between align-items-center mb-1 flex-wrap"
        >
          <div class="title-info d-flex flex-column">
            <p class="mb-0 mt-3">برنامج تدريبي</p>
            <p class="program-title mb-3 mt-0">
              {{ program.titleAr }}
            </p>
          </div>
          <div class="d-flex gap-1 justify-content-end rating-box text-warning align-items-center">
            <span>4.5</span>
            <div class="stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </div>
            <span class="text-muted small">(10 تقييمات)</span>
          </div>
        </div>
        <!-- Main Content -->
        <div class="col-lg-9">
          <!-- Tabs -->
          <ul class="nav nav-tabs mb-3" id="programTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="about-tab"
                data-bs-toggle="tab"
                data-bs-target="#about"
                type="button"
                role="tab"
              >
                عن البرنامج
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="goals-tab"
                data-bs-toggle="tab"
                data-bs-target="#goals"
                type="button"
                role="tab"
              >
                أهداف البرنامج
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="requirements-tab"
                data-bs-toggle="tab"
                data-bs-target="#requirements"
                type="button"
                role="tab"
              >
                متطلبات البرنامج
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="topics-tab"
                data-bs-toggle="tab"
                data-bs-target="#topics"
                type="button"
                role="tab"
              >
                موضوعات البرنامج
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="reviews-tab"
                data-bs-toggle="tab"
                data-bs-target="#reviews"
                type="button"
                role="tab"
              >
                التقييمات
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                data-bs-toggle="tab"
                type="button"
                role="tab"
              >
               
              </button>
            </li>
          </ul>

          <!-- Tabs Content -->
          <div class="tab-content" id="programTabsContent">
             <div class="tab-pane fade show active" id="about" role="tabpanel">
    <!-- محتوى "عن البرنامج" الأصلي -->
            <div class="mb-4">
              <p [innerHTML]="program.aboutAr"></p>
            </div>
            
            <!-- محتوى "أهداف البرنامج" -->
            <div class="mb-4">
              <h5 >أهداف البرنامج</h5>
              <p [innerHTML]="program.descriptionAr"></p>
            </div>
            
            <!-- محتوى "متطلبات البرنامج" -->
            <div class="mb-4">
              <h5 >متطلبات البرنامج</h5>
              <div [innerHTML]="program.programRequirementsAr"></div>
            </div>
            
            <div class="mb-4">
          <h5>موضوعات البرنامج</h5>
          <div class="accordion" id="programTopicsAccordion">
            <div *ngFor="let department of departments; let i = index" class="accordion-item">
                <h2 class="accordion-header accordion-border" id="heading-{{ i }}">
                <button class="accordion-button collapsed d-flex justify-content-between" type="button" data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapse-' + i" aria-expanded="false" [attr.aria-controls]="'collapse-' + i">
                  {{ department.titleAr }}
                </button>
              </h2>
              <div [id]="'collapse-' + i" class="accordion-collapse collapse" [attr.aria-labelledby]="'heading-' + i"
                data-bs-parent="#programTopicsAccordion">
                <div class="accordion-body">
                  <div class="lecture-list">
                    <div *ngFor="let lecture of department.lectures" class="lecture-item mb-2 p-3 rounded">
                      <div class="d-flex align-items-center">
                        <span class="lecture-icon me-2" [class]="getLectureIcon(lecture.typeId)"></span>
                        <span class="lecture-title">{{ lecture.titleAr }}</span>
                      </div>
                    </div>
                    <div *ngIf="department.lectures.length === 0" class="text-muted fst-italic">
                      لا توجد محاضرات في هذا القسم حالياً
                    </div>
                  </div>
                </div>
              </div>
                      </div>
                       <div
                  *ngIf="departments.length === 0"
                  class="text-center text-muted my-5"
                >
                  لم يتم إضافة موضوعات للبرنامج
                </div>
                    </div>
                  </div>

                      <!-- محتوى "التقييمات" -->
                      <div class="mb-4">
                        <h5 class="fs-5 fw-bold">التقييمات</h5>
                        <div class="review-item mt-3">
                          <p class="col-lg-6 mb-1"><strong>محمد خالد</strong></p>
                          <p class="col-lg-6 small text-muted text-start">⭐ 4.5</p>
                          <p>دورة مفيدة أنصح بها بشدة</p>
                          
                        </div>
                      </div>
                    </div>
              <div class="tab-pane fade" id="goals" role="tabpanel">
              <p [innerHTML]="program.descriptionAr"></p>
            </div>
            
            <div class="tab-pane fade" id="requirements" role="tabpanel">
              <h6>المتطلبات الأساسية:</h6>
              <div [innerHTML]="program.programRequirementsAr"></div>
            </div>
            <div class="tab-pane fade" id="topics" role="tabpanel">
              <div class="program-topics-container">
                
                <div class="accordion" id="programTopicsAccordion">
            <div *ngFor="let department of departments; let i = index" class="accordion-item">
              
              <h2 class="accordion-header accordion-border" id="heading-{{ i }}">
                <button class="accordion-button collapsed d-flex justify-content-between" type="button" data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapse-' + i" aria-expanded="false" [attr.aria-controls]="'collapse-' + i">
                  {{ department.titleAr }}
                </button>
              </h2>
              <div [id]="'collapse-' + i" class="accordion-collapse collapse" [attr.aria-labelledby]="'heading-' + i"
                data-bs-parent="#programTopicsAccordion">
                <div class="accordion-body">
                  <div class="lecture-list">
                    <div *ngFor="let lecture of department.lectures" class="lecture-item mb-2 p-3 rounded">
                      <div class="d-flex align-items-center">
                        <span class="lecture-icon me-2" [class]="getLectureIcon(lecture.typeId)"></span>
                        <span class="lecture-title">{{ lecture.titleAr }}</span>
                      </div>
                    </div>
                    <div *ngIf="department.lectures.length === 0" class="text-muted fst-italic">
                      لا توجد محاضرات في هذا القسم حالياً
                    </div>
                  </div>
                </div>
              </div>
                      </div>
                    </div>
                <!-- <div
                  *ngFor="let department of departments"
                  class="program-topic mb-5"
                >
                  <h6 class=" ">{{ department.titleAr }} :</h6>

                  <div class="lecture-list">
                    <div
                      *ngFor="let lecture of department.lectures"
                      class="lecture-item mb-2 p-3 border rounded"
                    >
                      <div class="d-flex align-items-center">
                        <span
                          class="lecture-icon me-2"
                          [class]="getLectureIcon(lecture.typeId)"
                        ></span>
                        <span class="lecture-title">{{ lecture.titleAr }}</span>
                      </div>
                    </div>
                    <div
                      *ngIf="department.lectures.length === 0"
                      class="text-muted fst-italic"
                    >
                      لا توجد محاضرات في هذا القسم حالياً
                    </div>
                  </div>
                </div> -->

                <div
                  *ngIf="departments.length === 0"
                  class="text-center text-muted my-5"
                >
                  لم يتم إضافة موضوعات للبرنامج
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="reviews" role="tabpanel">
              <div class="review-item mt-3">
                <p class="mb-1"><strong>محمد خالد</strong></p>
                <p class="small text-muted">دورة مفيدة أنصح بها بشدة ⭐ 4.5</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="card shadow-sm">
            <img
              [src]="program.programPicturePath"
              class="card-img-top"
              alt="صورة البرنامج"
            />
            <div class="card-body">
              <div class="d-flex align-items-center my-2">
                <span class="ms-2">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 32 32"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g>
                      <path d fill="#222" />
                    </g>
                  </svg>
                </span>
                <span class="fw-bold">{{program.programCostName?'مدفوع':'مجاني'}}</span>
              </div>
              <div class="line-divider"></div>
              <ul class="list-unstyled small mt-4 program-info side">
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M29.5,9.5c3.6,7.5,0.4,16.4-7.1,20S6,29.9,2.5,22.5S2.1,6,9.5,2.5c5.4-2.6,11.7-1.7,16.2,2.1L29,1.3 c0.5-0.5,1.2-0.5,1.6,0s0.5,1.2,0,1.6l0,0L16.8,16.8c-0.5,0.5-1.2,0.5-1.6,0c-0.5-0.5-0.5-1.2,0-1.6l4-4c-2.7-1.8-6.2-1-8,1.6 s-1,6.2,1.6,8c2.7,1.8,6.2,1,8-1.6c0.7-1,1-2.3,0.9-3.5c0-0.6,0.5-1.2,1.1-1.2S24,15,24,15.6l0,0c0.3,4.4-3.1,8.3-7.6,8.5 C12,24.3,8.2,20.9,8,16.4c-0.3-4.4,3.1-8.3,7.6-8.5c1.9-0.1,3.8,0.5,5.3,1.6l3.3-3.3C18.7,1.8,10.8,2.5,6.3,7.9S2.6,21.3,7.9,25.7 s13.4,3.7,17.8-1.7c3.2-3.8,3.8-9.1,1.7-13.6c-0.3-0.6,0-1.3,0.5-1.5C28.6,8.7,29.3,9,29.5,9.5L29.5,9.5z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>{{ program.privateProgram ? 'خاص' : 'عام' }}</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M26.4,20c-2.1,0-3.9,1.4-4.5,3.5h-14c-2.5,0-4.6-2.1-4.6-4.6s2.1-4.6,4.6-4.6h13.8c3.2,0,5.8-2.6,5.8-5.8S25,2.7,21.8,2.7 H7.9c-0.6,0-1.2,0.5-1.2,1.2S7.3,5,7.9,5h13.8c1.9,0,3.5,1.5,3.5,3.5S23.7,12,21.8,12H7.9C4.1,12,1,15.1,1,18.9s3.1,6.9,6.9,6.9 h14c0.6,2.5,3.2,4,5.6,3.3c2.5-0.6,4-3.2,3.3-5.6C30.3,21.5,28.5,20,26.4,20z M26.4,27c-1.3,0-2.3-1-2.3-2.3s1-2.3,2.3-2.3 s2.3,1,2.3,2.3S27.7,27,26.4,27z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>إعداد التقارير</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M29.9,8h-9.6C18.6,8,17,8.8,16,10.1C15,8.8,13.4,8,11.7,8H2.1C1.5,8,1,8.4,1,9v16.1c0,0.6,0.5,1.1,1.1,1.1h9.6 c1.8,0,3.2,1.4,3.2,3.2c0,0.6,0.5,1.1,1.1,1.1c0.6,0,1.1-0.5,1.1-1.1c0-1.8,1.4-3.2,3.2-3.2h9.6c0.6,0,1.1-0.5,1.1-1.1V9 C31,8.4,30.5,8,29.9,8z M11.7,24H3.1V10.1h8.6c1.8,0,3.2,1.4,3.2,3.2v11.8C14,24.4,12.9,24,11.7,24z M28.9,24h-8.6 c-1.2,0-2.3,0.4-3.2,1.1V13.3c0-1.8,1.4-3.2,3.2-3.2h8.6V24z M10.9,4.1c2.1-2.8,6.2-3.4,9-1.3c0.5,0.4,0.9,0.8,1.3,1.3 s0.3,1.1-0.2,1.5s-1.1,0.3-1.5-0.2c-1.4-1.9-4.1-2.3-6-0.9c-0.3,0.2-0.6,0.5-0.9,0.9c-0.4,0.5-1,0.6-1.5,0.2 C10.6,5.3,10.5,4.6,10.9,4.1z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>{{departments.length}} مواد دراسية</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 256 256"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M247.15,212.42l-56-112a8,8,0,0,0-14.31,0l-21.71,43.43A88,88,0,0,1,108,126.93,103.65,103.65,0,0,0,135.69,64H160a8,8,0,0,0,0-16H104V32a8,8,0,0,0-16,0V48H32a8,8,0,0,0,0,16h87.63A87.76,87.76,0,0,1,96,116.35a87.74,87.74,0,0,1-19-31,8,8,0,1,0-15.08,5.34A103.63,103.63,0,0,0,84,127a87.55,87.55,0,0,1-52,17,8,8,0,0,0,0,16,103.46,103.46,0,0,0,64-22.08,104.18,104.18,0,0,0,51.44,21.31l-26.6,53.19a8,8,0,0,0,14.31,7.16L148.94,192h70.11l13.79,27.58A8,8,0,0,0,240,224a8,8,0,0,0,7.15-11.58ZM156.94,176,184,121.89,211.05,176Z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>{{program.language===1?'العربية':'الانجليزية'}}</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-2">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M14.9,16c0,0.6-0.5,1.1-1.1,1.1H7.4c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h6.4C14.4,14.9,14.9,15.4,14.9,16z M13.9,10.6 H7.4c-0.6,0-1.1,0.5-1.1,1.1s0.5,1.1,1.1,1.1h6.4c0.6,0,1.1-0.5,1.1-1.1C14.9,11.1,14.4,10.6,13.9,10.6z M28.9,19.4v8.4 c0,0.6-0.5,1.1-1.1,1.1c-0.2,0-0.4,0-0.5-0.1L24,26.9l-3.2,1.8c-0.5,0.3-1.2,0.1-1.5-0.4c-0.1-0.2-0.1-0.4-0.1-0.5v-3.2H3.1 c-1.2,0-2.1-1-2.1-2.1V5.3c0-1.2,1-2.1,2.1-2.1h23.6c1.2,0,2.1,1,2.1,2.1v4.1c2.8,2.7,2.9,7.1,0.2,9.8 C29,19.3,28.9,19.3,28.9,19.4z M19.2,22.4v-3c-2.8-2.7-2.8-7.1-0.2-9.8c2-2.1,5-2.7,7.7-1.6V5.3H3.1v17.1 C3.1,22.4,19.2,22.4,19.2,22.4z M26.7,20.8c-1.7,0.7-3.6,0.7-5.4,0v5.1l2.1-1.2c0.3-0.2,0.7-0.2,1.1,0l2.1,1.2L26.7,20.8z M28.9,14.4c0-2.7-2.2-4.8-4.8-4.8s-4.8,2.2-4.8,4.8s2.2,4.8,4.8,4.8S28.9,17.1,28.9,14.4z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>{{program.certificateName?'منتهي بشهادة':'غير منتهي بشهادة'}}</span>
                </li>
                <li class="d-flex align-items-center mb-3">
                  <span class="ms-1">
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 256 256"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g>
                        <path
                          d="M224,88H175.4l8.47-46.57a8,8,0,0,0-15.74-2.86l-9,49.43H111.4l8.47-46.57a8,8,0,0,0-15.74-2.86L95.14,88H48a8,8,0,0,0,0,16H92.23L83.5,152H32a8,8,0,0,0,0,16H80.6l-8.47,46.57a8,8,0,0,0,6.44,9.3A7.79,7.79,0,0,0,80,224a8,8,0,0,0,7.86-6.57l9-49.43H144.6l-8.47,46.57a8,8,0,0,0,6.44,9.3A7.79,7.79,0,0,0,144,224a8,8,0,0,0,7.86-6.57l9-49.43H208a8,8,0,0,0,0-16H163.77l8.73-48H224a8,8,0,0,0,0-16Zm-76.5,64H99.77l8.73-48h47.73Z"
                          fill="#222"
                        />
                      </g>
                    </svg>
                  </span>
                  <span>حوكمة، ملاحظة، تقارير</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
  </div>
</div>

<!-- Loading state -->
<div class="text-center p-5" *ngIf="!program">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3">جاري تحميل بيانات البرنامج...</p>
</div>
